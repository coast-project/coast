#-----------------------------------------------------------------------------------------------------
# Copyright (c) 2005, Peter Sommerlad and IFS Institute for Software at HSR Rapperswil, Switzerland
# All rights reserved.
#
# This library/application is free software; you can redistribute and/or modify it under the terms of
# the license that is included with this library/application in the file license.txt.
#-----------------------------------------------------------------------------------------------------
{
	/PseudoHTTPHeader {
		/connection "close"
		/date "Thu, 11 Nov 2010 08:30:36 GMT"
		/server "Microsoft-IIS/6.0"
		/x-powered-by "ASP.NET"
		/x-aspnet-version "2.0.50727"
		/set-cookie "ASP.NET_SessionId=csjgcsewg42bva45tsexdu45; path=/; HttpOnly"
		/cache-control "private"
		/content-type "text/html; charset=utf-8"
		/content-length "4611"
		/CONTENT-TYPE "text/html; charset=utf-8; uppercase"
		/CONTENT-LENGTH "4611; uppercase"
	}
	/ExampleInput {
		/connection "close"
		/date "Thu, 11 Nov 2010 08:30:36 GMT"
		/server "Microsoft-IIS/6.0"
		/x-powered-by "ASP.NET"
		/x-aspnet-version "2.0.50727"
		/cache-control "private"
		/content-type "text/html; charset=utf-8"
		/content-length "4611"
	}

	/ConfiguredTests {
		/RegexFieldsMapperPositiveWithCase {
			/Value %PseudoHTTPHeader
			/Putkey "CodeExample"
			/MapperConfig {
				/DestinationSlot ""
				/CodeExample {
					/^content	*
				}
			}
			/Result {
				/TmpStore {
					/CodeExample {
						/content-type "text/html; charset=utf-8"
						/content-length "4611"
					}
				}
			}
		}
		/RegexFieldsMapperPositiveCaseless {
			/Value %PseudoHTTPHeader
			/Putkey "CodeExample"
			/MapperConfig {
				/DestinationSlot ""
				/MatchFlags		1	# caseless matching
				/CodeExample {
					/^content	*
				}
			}
			/Result {
				/TmpStore {
					/CodeExample {
						/content-type "text/html; charset=utf-8"
						/content-length "4611"
						/CONTENT-TYPE "text/html; charset=utf-8; uppercase"
						/CONTENT-LENGTH "4611; uppercase"
					}
				}
			}
		}
		/RegexFieldsMapperCodeExampleTest {
			/Value %ExampleInput
			/Putkey "CodeExample"
			/MapperConfig {
				/DestinationSlot SomeWhere
				/MatchFlags		1
				/CodeExample {
					/"^content"	{			# execute Mapper script for entries starting with accept
						/RootMapper	*
					}
					/"^server"	"-"			# do not map this entry
					/"."		*			# catch all others and do default putting
				}
			}
			/Result {
				/TmpStore {
					/SomeWhere {
						/CodeExample {
							/connection "close"
							/date "Thu, 11 Nov 2010 08:30:36 GMT"
							/x-powered-by "ASP.NET"
							/x-aspnet-version "2.0.50727"
							/cache-control "private"
						}
					}
					/CodeExample {
						/content-type "text/html; charset=utf-8"
						/content-length "4611"
					}
				}
			}
		}
		/RegexFieldsMapperAll {
			/Value %PseudoHTTPHeader
			/Putkey "CodeExample"
			/MapperConfig {
				/DestinationSlot ""
				/CodeExample {
					/.			*
				}
			}
			/Result {
				/TmpStore {
					/CodeExample %PseudoHTTPHeader
				}
			}
		}
		/RegexFieldsMapperNone {
			/Value %PseudoHTTPHeader
			/Putkey "CodeExample"
			/MapperConfig {
				/DestinationSlot ""
				/CodeExample {
				}
			}
			/Result {
				/TmpStore {
				}
			}
		}
		/RegexFieldsMapperAllWithoutSome {
			/Value %PseudoHTTPHeader
			/Putkey "CodeExample"
			/MapperConfig {
				/DestinationSlot ""
				/CodeExample {
					/"(server|^x-)"	"-"
					/.				*
				}
			}
			/Result {
				/TmpStore {
					/CodeExample {
						/connection "close"
						/date "Thu, 11 Nov 2010 08:30:36 GMT"
						/set-cookie "ASP.NET_SessionId=csjgcsewg42bva45tsexdu45; path=/; HttpOnly"
						/cache-control "private"
						/content-type "text/html; charset=utf-8"
						/content-length "4611"
						/CONTENT-TYPE "text/html; charset=utf-8; uppercase"
						/CONTENT-LENGTH "4611; uppercase"
					}
				}
			}
		}
	}
}
